webpackJsonp([0],[function(e,t,s){var a=s(1),i=s(158),n={url:"/panel/api/faq"},r=s(159),l=s(160).Accordion,o=s(160).Panel,u=s(160).Input,c=s(160).Button,p=a.createClass({displayName:"FAQPage",getInitialState:function(){return{faqs:[],tempFAQs:[],editable:!1,editing:!1}},loadDataFromServer:function(){$.ajax({url:this.props.urls.url,dataType:"json",cache:!1,success:function(e){this.setState({faqs:e.faqs}),e.editable&&this.setState({editable:e.editable})}.bind(this),error:function(e,t,s){console.error(this.props.urls.url,t,s.toString())}.bind(this)})},updateFAQ:function(e){this.setState({tempFAQs:e})},updateQuestion:function(e,t){var s=this.state.tempFAQs,a=s[e];a.question=t,s[e]=a,this.setState({tempFAQs:s})},updateAnswer:function(e,t){var s=this.state.tempFAQs,a=s[e];a.answer=t,s[e]=a,this.setState({tempFAQs:s})},addQuestion:function(){var e=this.state.tempFAQs,t=e.length>0?e[e.length-1].id+1:1;e.push({id:t,question:"",answer:""}),this.setState({tempFAQs:e})},deleteQuestion:function(e){var t=this.state.tempFAQs;t.splice(e,1),this.setState({tempFAQs:t})},submitData:function(){var e=this.state.faqs;this.setState({faqs:this.state.tempFAQs}),$.ajax({url:this.props.urls.url,dataType:"json",type:"POST",data:{faqs:JSON.stringify(this.state.tempFAQs)},success:function(e){this.setState({editing:!1,tempFAQs:[]})}.bind(this),error:function(t,s,a){this.setState({faqs:e}),console.error(this.props.urls.url,s,a.toString())}.bind(this)})},toggleEditing:function(){this.setState({tempFAQs:this.state.faqs.slice(0),editing:!this.state.editing})},componentDidMount:function(){this.loadDataFromServer()},render:function(){if(this.state.editing)var e=this.updateQuestion,t=this.updateAnswer,s=this.deleteQuestion,i=this.state.tempFAQs.map(function(i,n){return a.createElement(d,{key:n,qid:n,question:i.question,answer:i.answer,handleUpdateQuestion:e,handleUpdateAnswer:t,handleDelete:s})});else var n=this.state.faqs.map(function(e,t){return a.createElement(o,{header:e.question,eventKey:t,key:t},e.answer)});return a.createElement("div",{className:"faqPage"},a.createElement(r,null),this.state.editing?a.createElement("div",{className:"editQuestions"},i,a.createElement("div",{className:"mainActions"},a.createElement("a",{onClick:this.addQuestion},"+ Add New Question"),a.createElement("span",{className:"rightFloat"},a.createElement(c,{onClick:this.submitData,className:"lightPadding"},"Submit"),a.createElement(c,{className:"cancelLink lightPadding",onClick:this.toggleEditing},"Cancel")))):a.createElement("div",{className:"questions"},a.createElement(l,null,n),this.state.editable?a.createElement("p",{className:"mainActions"},a.createElement("a",{className:"rightFloat",onClick:this.toggleEditing},"Edit")):""))}}),d=a.createClass({displayName:"QuestionEdit",updateQuestion:function(e){this.props.handleUpdateQuestion(this.props.qid,e.target.value)},updateAnswer:function(e){this.props.handleUpdateAnswer(this.props.qid,e.target.value)},deleteQuestion:function(){this.props.handleDelete(this.props.qid)},render:function(){return a.createElement("div",{className:"questionEdit"},a.createElement("p",{className:"actions"},"Question ",this.props.qid+1," ",a.createElement("a",{className:"cancelLink rightFloat",onClick:this.deleteQuestion},"Delete")),a.createElement("form",{className:"form-horizontal"},a.createElement(u,{type:"text",value:this.props.question,placeholder:"Question",ref:"input",groupClassName:"input",wrapperClassName:"col-xs-12",onChange:this.updateQuestion}),a.createElement(u,{type:"textarea",value:this.props.answer,placeholder:"Answer",ref:"input",groupClassName:"input",wrapperClassName:"col-xs-12",onChange:this.updateAnswer})))}});i.render(a.createElement(p,{urls:n}),document.getElementById("content"))}]);