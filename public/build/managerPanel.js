webpackJsonp([0],{0:function(e,t,n){var r=n(1),s=n(158),i={url:"/panel/manager/info",listAccounts:"/panel/manager/api/listAccounts",verifyAccount:"/panel/manager/api/verify","delete":"/panel/manager/api/delete",deleteUnverified:"/panel/manager/api/deleteUnverified"},a=r.createClass({displayName:"Manager",getInitialState:function(){return{}},componentDidMount:function(){},render:function(){return r.createElement("div",{className:"manager"},r.createElement(c,{urls:this.props.urls}))}}),c=r.createClass({displayName:"AccountsList",loadDataFromServer:function(){console.log("retrieving accounts..."),$.ajax({url:this.props.urls.listAccounts,dataType:"json",type:"POST",cache:!1,success:function(e){this.setState({accounts:e})}.bind(this),error:function(e,t,n){console.error(this.props.url,t,n.toString())}.bind(this)})},updateUser:function(e,t,n){var r={username:t};$.ajax({url:e,dataType:"json",type:"POST",data:r,success:function(){this.loadDataFromServer()}.bind(this),error:function(e,t,r){this.setState({accounts:n}),console.error(this.props.showURL,t,r.toString())}.bind(this)})},handleVerifyUser:function(e){for(var t=this.state.accounts,n=$.extend(!0,[],this.state.accounts),r=0;r<n.unverified.length;r++)if(n.unverified[r].username==e){n.verified.push(n.unverified[r]),n.unverified.splice(r,1);break}this.setState({accounts:n}),this.updateUser(this.props.urls.verifyAccount,e,t)},handleDeleteUser:function(e){for(var t=this.state.accounts,n=$.extend(!0,[],this.state.accounts),r=0;r<n.verified.length;r++)if(n.verified[r].username==e){n.verified.splice(r,1);break}this.setState({accounts:n}),this.updateUser(this.props.urls["delete"],e,t)},handleDeleteUnverifiedUser:function(e){for(var t=this.state.accounts,n=$.extend(!0,[],this.state.accounts),r=0;r<n.unverified.length;r++)if(n.unverified[r].username==e){n.unverified.splice(r,1);break}this.setState({accounts:n}),this.updateUser(this.props.urls.deleteUnverified,e,t)},getInitialState:function(){return{accounts:{unverified:[],verified:[]}}},componentDidMount:function(){this.loadDataFromServer()},render:function(){var e=this.handleVerifyUser,t=this.handleDeleteUnverifiedUser,n=this.handleDeleteUser,s=this.state.accounts.unverified.map(function(n){return r.createElement("div",{key:n.username},r.createElement(u,{user:n,onVerifyUser:e,onDelete:t}))}),i=this.state.accounts.verified.map(function(e){return r.createElement("div",{key:e.username},r.createElement(l,{user:e,onDelete:n}))});return r.createElement("div",{className:"accountsList"},this.state.accounts.unverified.length>0?r.createElement("div",null,r.createElement("h2",null," Requested Accounts ")," ",s):r.createElement("div",null),r.createElement("br",null),this.state.accounts.verified.length>0?r.createElement("div",null,r.createElement("h2",null," DJs ")," ",i):r.createElement("div",null))}}),u=r.createClass({displayName:"UnverifiedUserAccount",handleVerifyUser:function(){this.props.onVerifyUser(this.props.user.username)},handleRemoveUser:function(){this.props.onDelete(this.props.user.username)},render:function(){return r.createElement("div",{className:"unverifiedUserAccount"},r.createElement("p",null,this.props.user.username,", email: ",this.props.user.email,r.createElement("button",{onClick:this.handleVerifyUser},"Verify DJ"),"â€ƒ",r.createElement("button",{className:"destructive",onClick:this.handleRemoveUser},"Delete")))}}),l=r.createClass({displayName:"UserAccount",handleRemoveUser:function(){this.props.onDelete(this.props.user.username)},render:function(){return r.createElement("div",{className:"userAccount"},r.createElement("p",null,this.props.user.username,", email: ",this.props.user.email,r.createElement("button",{className:"destructive",onClick:this.handleRemoveUser},"Delete")))}});s.render(r.createElement(a,{urls:i}),document.getElementById("content"))},158:function(e,t,n){"use strict";e.exports=n(3)}});