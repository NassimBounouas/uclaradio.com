webpackJsonp([5],[function(e,t,a){"use strict";var r=a(24),n=a(320),l=r.createClass({displayName:"NameFilter",updateFilterName:function(){this.props.handleFilterChange({nameFilter:this.refs.nameFilterInput.value})},render:function(){return r.createElement("div",{className:"form-group"},r.createElement("h3",null,"Name"),r.createElement("input",{type:"text",name:"fullName",defaultValue:this.props.nameFilter,className:"form-control",onChange:this.updateFilterName,ref:"nameFilterInput"}))}}),s=r.createClass({displayName:"DateFilter",updateFilterDate:function(){this.props.handleFilterChange({beginDateFilter:new Date(this.refs.beginDateInput.value.replace(/-/g,"/")),endDateFilter:new Date(this.refs.endDateInput.value.replace(/-/g,"/"))})},convertDateToHTMLFormat:function(e){var t=e.getFullYear(),a=e.getMonth()+1;a+="",1===a.length&&(a="0"+a);var r=e.getDate()+"";return 1===r.length&&(r="0"+r),t+"-"+a+"-"+r},render:function(){return r.createElement("div",{className:"form-group"},r.createElement("h3",null,"Date"),r.createElement("input",{type:"date",name:"beginDate",defaultValue:this.convertDateToHTMLFormat(this.props.beginDate),className:"form-control",onChange:this.updateFilterDate,ref:"beginDateInput"}),r.createElement("input",{type:"date",name:"endDate",defaultValue:this.convertDateToHTMLFormat(this.props.endDate),className:"form-control",onChange:this.updateFilterDate,ref:"endDateInput"}))}}),i=r.createClass({displayName:"StatusFilter",updateFilterStatus:function(){this.props.handleFilterChange({statusFilter:this.refs.statusInput.value})},render:function(){return r.createElement("div",{className:"form-group"},r.createElement("h3",null,"Point Status"),r.createElement("select",{name:"point_status",className:"form-control",defaultValue:"all",onChange:this.updateFilterStatus,ref:"statusInput"},r.createElement("option",{value:"all"},"Any"),r.createElement("option",{value:"pending"},"Pending"),r.createElement("option",{value:"approved"},"Approved"),r.createElement("option",{value:"denied"},"Denied"),r.createElement("option",{value:"canceled"},"Canceled")))}}),o=r.createClass({displayName:"DepartmentFilter",updateFilterDepartment:function(){this.props.handleFilterChange({departmentFilter:this.refs.departmentInput.value})},render:function(){return r.createElement("div",{className:"form-group"},r.createElement("h3",null,"Department"),r.createElement("select",{name:"department",className:"form-control",defaultValue:"all",onChange:this.updateFilterDepartment,ref:"departmentInput"},r.createElement("option",{value:"all"},"All"),r.createElement("option",{value:"artanddesign"},"Art & Design"),r.createElement("option",{value:"digitalpress"},"Digital Press "),r.createElement("option",{value:"comedy"},"Comedy"),r.createElement("option",{value:"events"},"Events"),r.createElement("option",{value:"fundraising"},"Fundraising"),r.createElement("option",{value:"marketing"},"Marketing"),r.createElement("option",{value:"music"},"Music"),r.createElement("option",{value:"news"},"News "),r.createElement("option",{value:"photo"},"Photo/Video"),r.createElement("option",{value:"productions"},"Productions"),r.createElement("option",{value:"programming"},"Programming"),r.createElement("option",{value:"promotions"},"Promotions"),r.createElement("option",{value:"sports"},"Sports"),r.createElement("option",{value:"web"},"Web"),r.createElement("option",{value:"interns"},"Interns")))}}),p=r.createClass({displayName:"StaffingPointsRow",updateStatus:function(e){var t=this.props.record._id,a=this.props.password,r=this.refs.managerNotes.value,n=this.props.ajaxUpdateStatus;$.post("view/update",{userId:t,status:e,managerNotes:r,password:a},function(a){n(a,e,t)})},render:function(){return r.createElement("tr",null,r.createElement("td",null,this.props.record.fullName),r.createElement("td",null,this.props.record.number),r.createElement("td",null,this.props.record.description),r.createElement("td",null,this.props.record.department),r.createElement("td",null,this.props.record.dateCompleted.toDateString()),r.createElement("td",null,this.props.record.notes),r.createElement("td",null,this.props.record.status),r.createElement("td",{onClick:this.updateStatus.bind(null,"approved")},r.createElement("button",null,"Approve")),r.createElement("td",{onClick:this.updateStatus.bind(null,"denied")},r.createElement("button",null,"Deny")),r.createElement("td",null,r.createElement("textarea",{ref:"managerNotes",defaultValue:this.props.record.managerNotes})))}}),u=r.createClass({displayName:"StaffingPointsTable",render:function(){var e=this.props.records.filter(function(e){var t,a=e.fullName.toUpperCase().indexOf(this.props.nameFilter.toUpperCase())!==-1;t="all"===this.props.departmentFilter||e.department.toUpperCase()===this.props.departmentFilter.toUpperCase();var r;r="all"===this.props.statusFilter||e.status.toUpperCase()===this.props.statusFilter.toUpperCase();var n=e.dateCompleted>this.props.beginDateFilter,l=e.dateCompleted<this.props.endDateFilter;return r&&t&&a&&n&&l},this),t=e.map(function(e){return r.createElement(p,{key:e._id,record:e,password:this.props.password,ajaxUpdateStatus:this.props.updateStatus})},this);return r.createElement("table",null,r.createElement("thead",null,r.createElement("tr",null,r.createElement("th",null,"Full Name"),r.createElement("th",null,"Points"),r.createElement("th",null,"Description"),r.createElement("th",null,"Department"),r.createElement("th",null,"Completion Date"),r.createElement("th",null,"Notes"),r.createElement("th",null,"Status"),r.createElement("th",null,"Approve"),r.createElement("th",null,"Deny"),r.createElement("th",null,"Manager Notes"))),r.createElement("tbody",null,t))}}),d=r.createClass({displayName:"StaffingPointsView",getInitialState:function(){return{nameFilter:"",departmentFilter:"all",statusFilter:"all",beginDateFilter:new Date("January 1, 2016"),endDateFilter:new Date,password:"",statusMessage:"",records:[]}},componentDidMount:function(){var e=this;$.get("points",function(t){t.forEach(function(e){e.dateCompleted=new Date(e.dateCompleted)}),e.setState({records:t})})},updatePassword:function(){this.setState({password:this.refs.passwordInput.value})},updateStatus:function(e,t,a){if("incorrect password"!==e){for(var r=-1,n=0;n<this.state.records.length;n++)this.state.records[n]._id===a&&(r=n);var l=this.state.records[r],s=JSON.parse(JSON.stringify(l));s.dateCompleted=new Date(s.dateCompleted),s.status=t;var i=[this.state.records.slice(0,r),s,this.state.records.slice(r+1,this.state.records.length)]}else var i=this.state.records;this.setState({records:i,statusMessage:e})},handleFilterChange:function(e){this.setState(e)},render:function(){return r.createElement("div",null,r.createElement("h1",{id:"header"},"Staffing Points"),r.createElement("h4",null,this.state.statusMessage),r.createElement("div",{className:"row"},r.createElement("div",{className:"col-md-4 col-md-offset-8 "},r.createElement("div",{className:"form-group"},r.createElement("h3",null,"Super Secret Password"),r.createElement("input",{type:"password",name:"password",className:"form-control",onChange:this.updatePassword,ref:"passwordInput"})))),r.createElement("div",{className:"row"},r.createElement("div",{className:"col-md-3"},r.createElement(l,{filterName:this.state.nameFilter,handleFilterChange:this.handleFilterChange})),r.createElement("div",{className:"col-md-3"},r.createElement(s,{beginDate:this.state.beginDateFilter,endDate:this.state.endDateFilter,handleFilterChange:this.handleFilterChange})),r.createElement("div",{className:"col-md-3"},r.createElement(i,{handleFilterChange:this.handleFilterChange})),r.createElement("div",{className:"col-md-3"},r.createElement(o,{handleFilterChange:this.handleFilterChange}))),r.createElement(u,{records:this.state.records,nameFilter:this.state.nameFilter,departmentFilter:this.state.departmentFilter,statusFilter:this.state.statusFilter,beginDateFilter:this.state.beginDateFilter,endDateFilter:this.state.endDateFilter,password:this.state.password,updateStatus:this.updateStatus}))}});n.render(r.createElement(d,null),document.getElementById("container"))}]);