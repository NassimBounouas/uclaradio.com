webpackJsonp([5],[function(e,t,a){var n=a(1),r=a(158),l=n.createClass({displayName:"NameFilter",updateFilterName:function(){this.props.handleFilterChange({nameFilter:this.refs.nameFilterInput.value})},render:function(){return n.createElement("div",{className:"form-group"},n.createElement("h3",null,"Name"),n.createElement("input",{type:"text",name:"fullName",defaultValue:this.props.nameFilter,className:"form-control",onChange:this.updateFilterName,ref:"nameFilterInput"}))}}),s=n.createClass({displayName:"DateFilter",updateFilterDate:function(){this.props.handleFilterChange({beginDateFilter:new Date(this.refs.beginDateInput.value.replace(/-/g,"/")),endDateFilter:new Date(this.refs.endDateInput.value.replace(/-/g,"/"))})},convertDateToHTMLFormat:function(e){const t=e.getFullYear();var a=e.getMonth()+1;a+="",1===a.length&&(a="0"+a);var n=e.getDate()+"";return 1===n.length&&(n="0"+n),t+"-"+a+"-"+n},render:function(){return n.createElement("div",{className:"form-group"},n.createElement("h3",null,"Date"),n.createElement("input",{type:"date",name:"beginDate",defaultValue:this.convertDateToHTMLFormat(this.props.beginDate),className:"form-control",onChange:this.updateFilterDate,ref:"beginDateInput"}),n.createElement("input",{type:"date",name:"endDate",defaultValue:this.convertDateToHTMLFormat(this.props.endDate),className:"form-control",onChange:this.updateFilterDate,ref:"endDateInput"}))}}),i=n.createClass({displayName:"StatusFilter",updateFilterStatus:function(){this.props.handleFilterChange({statusFilter:this.refs.statusInput.value})},render:function(){return n.createElement("div",{className:"form-group"},n.createElement("h3",null,"Point Status"),n.createElement("select",{name:"point_status",className:"form-control",defaultValue:"all",onChange:this.updateFilterStatus,ref:"statusInput"},n.createElement("option",{value:"all"},"Any"),n.createElement("option",{value:"pending"},"Pending"),n.createElement("option",{value:"approved"},"Approved"),n.createElement("option",{value:"denied"},"Denied"),n.createElement("option",{value:"canceled"},"Canceled")))}}),o=n.createClass({displayName:"DepartmentFilter",updateFilterDepartment:function(){this.props.handleFilterChange({departmentFilter:this.refs.departmentInput.value})},render:function(){return n.createElement("div",{className:"form-group"},n.createElement("h3",null,"Department"),n.createElement("select",{name:"department",className:"form-control",defaultValue:"all",onChange:this.updateFilterDepartment,ref:"departmentInput"},n.createElement("option",{value:"all"},"All"),n.createElement("option",{value:"artanddesign"},"Art & Design"),n.createElement("option",{value:"digitalpress"},"Digital Press "),n.createElement("option",{value:"comedy"},"Comedy"),n.createElement("option",{value:"events"},"Events"),n.createElement("option",{value:"fundraising"},"Fundraising"),n.createElement("option",{value:"marketing"},"Marketing"),n.createElement("option",{value:"music"},"Music"),n.createElement("option",{value:"news"},"News "),n.createElement("option",{value:"photo"},"Photo/Video"),n.createElement("option",{value:"productions"},"Productions"),n.createElement("option",{value:"programming"},"Programming"),n.createElement("option",{value:"promotions"},"Promotions"),n.createElement("option",{value:"sports"},"Sports"),n.createElement("option",{value:"web"},"Web"),n.createElement("option",{value:"interns"},"Interns")))}}),p=n.createClass({displayName:"StaffingPointsRow",updateStatus:function(e){var t=this.props.record._id,a=this.props.password,n=this.refs.managerNotes.value,r=this.props.ajaxUpdateStatus;$.post("view/update",{userId:t,status:e,managerNotes:n,password:a},function(a){r(a,e,t)})},render:function(){return n.createElement("tr",null,n.createElement("td",null,this.props.record.fullName),n.createElement("td",null,this.props.record.number),n.createElement("td",null,this.props.record.description),n.createElement("td",null,this.props.record.department),n.createElement("td",null,this.props.record.dateCompleted.toDateString()),n.createElement("td",null,this.props.record.notes),n.createElement("td",null,this.props.record.status),n.createElement("td",{onClick:this.updateStatus.bind(null,"approved")},n.createElement("button",null,"Approve")),n.createElement("td",{onClick:this.updateStatus.bind(null,"denied")},n.createElement("button",null,"Deny")),n.createElement("td",null,n.createElement("textarea",{ref:"managerNotes",defaultValue:this.props.record.managerNotes})))}}),u=n.createClass({displayName:"StaffingPointsTable",render:function(){var e=this.props.records.filter(function(e){var t,a=e.fullName.toUpperCase().indexOf(this.props.nameFilter.toUpperCase())!==-1;t="all"===this.props.departmentFilter||e.department.toUpperCase()===this.props.departmentFilter.toUpperCase();var n;n="all"===this.props.statusFilter||e.status.toUpperCase()===this.props.statusFilter.toUpperCase();var r=e.dateCompleted>this.props.beginDateFilter,l=e.dateCompleted<this.props.endDateFilter;return n&&t&&a&&r&&l},this),t=e.map(function(e){return n.createElement(p,{key:e._id,record:e,password:this.props.password,ajaxUpdateStatus:this.props.updateStatus})},this);return n.createElement("table",null,n.createElement("thead",null,n.createElement("tr",null,n.createElement("th",null,"Full Name"),n.createElement("th",null,"Points"),n.createElement("th",null,"Description"),n.createElement("th",null,"Department"),n.createElement("th",null,"Completion Date"),n.createElement("th",null,"Notes"),n.createElement("th",null,"Status"),n.createElement("th",null,"Approve"),n.createElement("th",null,"Deny"),n.createElement("th",null,"Manager Notes"))),n.createElement("tbody",null,t))}}),d=n.createClass({displayName:"StaffingPointsView",getInitialState:function(){return{nameFilter:"",departmentFilter:"all",statusFilter:"all",beginDateFilter:new Date("January 1, 2016"),endDateFilter:new Date,password:"",statusMessage:"",records:[]}},componentDidMount:function(){var e=this;$.get("points",function(t){t.forEach(function(e){e.dateCompleted=new Date(e.dateCompleted)}),e.setState({records:t})})},updatePassword:function(){this.setState({password:this.refs.passwordInput.value})},updateStatus:function(e,t,a){if("incorrect password"!==e){for(var n=-1,r=0;r<this.state.records.length;r++)this.state.records[r]._id===a&&(n=r);const l=this.state.records[n],s=JSON.parse(JSON.stringify(l));s.dateCompleted=new Date(s.dateCompleted),s.status=t;var i=[this.state.records.slice(0,n),s,this.state.records.slice(n+1,this.state.records.length)]}else var i=this.state.records;this.setState({records:i,statusMessage:e})},handleFilterChange:function(e){this.setState(e)},render:function(){return n.createElement("div",null,n.createElement("h1",{id:"header"},"Staffing Points"),n.createElement("h4",null,this.state.statusMessage),n.createElement("div",{className:"row"},n.createElement("div",{className:"col-md-4 col-md-offset-8 "},n.createElement("div",{className:"form-group"},n.createElement("h3",null,"Super Secret Password"),n.createElement("input",{type:"password",name:"password",className:"form-control",onChange:this.updatePassword,ref:"passwordInput"})))),n.createElement("div",{className:"row"},n.createElement("div",{className:"col-md-3"},n.createElement(l,{filterName:this.state.nameFilter,handleFilterChange:this.handleFilterChange})),n.createElement("div",{className:"col-md-3"},n.createElement(s,{beginDate:this.state.beginDateFilter,endDate:this.state.endDateFilter,handleFilterChange:this.handleFilterChange})),n.createElement("div",{className:"col-md-3"},n.createElement(i,{handleFilterChange:this.handleFilterChange})),n.createElement("div",{className:"col-md-3"},n.createElement(o,{handleFilterChange:this.handleFilterChange}))),n.createElement(u,{records:this.state.records,nameFilter:this.state.nameFilter,departmentFilter:this.state.departmentFilter,statusFilter:this.state.statusFilter,beginDateFilter:this.state.beginDateFilter,endDateFilter:this.state.endDateFilter,password:this.state.password,updateStatus:this.updateStatus}))}});r.render(n.createElement(d,null),document.getElementById("container"))}]);